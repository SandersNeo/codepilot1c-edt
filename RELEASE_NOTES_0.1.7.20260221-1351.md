# CodePilot1C EDT — расширения, внешние обработки и СКД

Сборка: `0.1.7.20260221-1351`

Агент теперь покрывает три ключевых production-сценария 1С-разработки: доработка типовых через расширения, создание внешних отчётов/обработок и работа со схемами компоновки данных. Всё через API EDT, в одном agent loop.

---

## Расширения конфигурации

Полный цикл работы с расширениями без снятия типовой с поддержки:

- Получить список расширений проекта
- Создать новый проект расширения
- Заимствовать объекты из основной конфигурации
- Управлять состоянием свойств заимствованных объектов
- Расширить формы, изменить модули, переопределить процедуры

Типичный промпт: "Создай расширение для УТ, добавь кнопку печати в документ РеализацияТоваров, напиши обработчик" — агент создаёт расширение, заимствует документ, добавляет команду на форму, пишет код.

---

## Внешние отчёты и обработки

Новый контур инструментов для external-объектов:

- Создать проект внешнего отчёта или обработки
- Получить список внешних проектов для базовой конфигурации
- Посмотреть объекты и структуру внешнего проекта
- Добавить формы, реквизиты, табличные части
- Работать с модулями объектов и форм

Внешние обработки — это основной способ расширения функциональности без изменения конфигурации. Теперь агент умеет их создавать и дорабатывать наравне с объектами основной конфигурации.

---

## Схема компоновки данных (СКД)

Агент умеет работать с DCS — не просто создать объект отчёта, а наполнить его аналитической логикой:

- Создать основную схему компоновки и привязать к владельцу
- Получить сводку по существующей схеме
- Просмотреть узлы модели: датасеты, параметры, вычисляемые поля, варианты
- Создать или обновить query dataset с текстом запроса
- Добавить/изменить параметры и вычисляемые поля

Это закрывает одну из главных болей: отчёты и СКД — рутина, которую разработчики делают каждый день. Теперь можно описать требования к отчёту в промпте, и агент создаёт внешний отчёт с готовой схемой компоновки.

---

## Единый контур валидации

Все мутационные операции — и в основной конфигурации, и в расширениях, и во внешних объектах — проходят через единый процесс: предвалидация запроса → получение validation token → выполнение мутации. Сломать структуру метаданных через агента невозможно — валидация встроена на уровне API.

---

## Что это значит на практике

Три самых частых сценария 1С-разработки теперь покрыты агентом:

1. **Доработка типовой через расширение** — не снимая с поддержки, через заимствование и переопределение.
2. **Внешние отчёты и обработки** — создание, формы, модули, реквизиты.
3. **СКД** — схема компоновки с датасетами, параметрами, вычисляемыми полями.

Всё в одном цикле, всё через EDT API. Один промпт — агент сам решает какие инструменты вызвать.
